# 2020-09

当你有一天在你的城市有了一片立足之地，你会发现原来一切都值得。

## 2020-09-03

- 生活
- 身体健康
- 工作方面

1.  问题反馈 sdk

    1. sdk 封装<daily-status />
    2. demo 页面<daily-status />
    3. 增加扩展字段，备注

- 个人能力

- 总结复盘

  1. 今天只完成一件事，sdk 的设计和基础架构的搭建

     1. sdk 的编写需要搭建一个调试环境，随时看到效果
     2. sdk 的自动化部署，使用 jenkins
     3. sdk 是异步加载的，在 sdk 加载完之前调用的 sdk 接口，也必须在 sdk 加载完成之后按顺序完成
     4. sdk 接口一律 promise 形式
     5. sdk 需要做兼容
     6. sdk 使用 jsonp 做请求的时候，错误情况的处理方式
        script 的 onerror 去监听
     7. sdk 使用 axios 进行网络请求，各种方式的参数传递
     8. vue-resource 的 emulateJSON ，在 axios 中，使用`qs.stringify({})`去传值，`npm install qs -s`,
        或者
        ```js
        transformRequest: [
          data => {
            let ret = "";
            for (let it in data) {
              ret +=
                encodeURIComponent(it) +
                "=" +
                encodeURIComponent(data[it]) +
                "&";
            }
            return ret;
          }
        ],
        ```
     9. log 日志：onError
     10. 接口的权限处理，很多接口需要登录才能使用
     11. 接口的并发（这个暂时没处理）
         相同接口的调用，一个未完成，另一个不能调用，或者一个未完成，另一个要调用，要强行中断前一个
     12. 接口的使用文档
     13. sdk 的 demo 页
     14. 接口的逐个调试
     15. 接口参数的校验（这个暂时没处理）
     16. sdk 的体积要尽量压缩，目前 43kb

  2. 今天的 sdk 给自己很多思路

     1. 明确的目标，在这里是 sdk 的设计使用，可以在 demo 页面上展示每个接口效果
     2. 创造一个舒适的环境，在这里是 sdk 的自动化部署和搭建调试环境，磨刀不误砍柴时，创建好环境才能进行快速开发迭代。
        之前在 faster 上编写，看效果异常艰难，而且不能引 npm 包，效率慢了 10 倍不止，精力和时间都要消耗殆尽了。
     3. 清晰的思路，之前的网络请求用 fetch，是原生的，目的是减少代码量，减少 sdk 体积，但是发现这个 sdk 和以往的埋点 sdk 不同，它有大量接口请求，而且请求的方式不同，传参方式也不同，
        如果在 fetch 的基础上实现，非常困难，果断改为 axios 和 jsonp，效果极佳，而且迈过了 vue-resource 的 emulateJSON 和 jsonp 的错误处理的坑之后，基本没有什么大的问题。
     4. 平时的积累
        sdk 是异步加载的，在 sdk 加载完之前调用的 sdk 接口，也必须在 sdk 加载完成之后按顺序完成，这个就是之前写埋点 sdk 的时候，研究诸葛 sdk 的实现掌握的，屡试不爽。

## 2020-09-03

- 生活
- 身体健康
- 工作方面

1. P5，P6 地区问题<daily-status />
2. gpmc 部署正式环境<daily-status />
3. p5 接口优化
4. p6 接口优化
5. gtj 文章都要有阅读上报
6. 完善问题反馈的接口
7. 文章接口，登录接口，商品接口重新调整
8. 在 P5，P6S 上调通 4 的情况。
9. 晓燕微信的问题修复<daily-status />
10. 问题反馈 sdk

    1. sdk 封装<daily-status />
    2. demo 页面<daily-status />
    3. 增加扩展字段，备注

11. P5,P6,gmp 核对文章阅读上报<daily-status />
12. 董海提出的埋点问题的处理<daily-status />
13. 案例下载提示

- 个人能力

- 总结复盘

## 2020-09-09

- 生活
- 身体健康
- 工作方面

1. p5 接口优化
2. p6 接口优化
3. gtj 文章都要有阅读上报
4. 完善问题反馈的接口
5. 文章接口，登录接口，商品接口重新调整
6. 在 P5，P6S 上调通 4 的情况。
7. 问题反馈 sdk

   1. sdk 封装<daily-status />
      包括数据校验，错误日志，兼容性，基础接口
   2. demo 页面<daily-status />
   3. 文档页面

- 个人能力

- 总结复盘

1. sdk 的编写目前大小是 48KB，感觉有点大了。今天主要加入了校验机制，接口参数在新增和更新操作中可以进行参数校验，而且这个已经封装了工具库。
2. 设想了 sdk 文档的编写方式，打算运用之前的文档平台，现在等待 git 库申请下来
3. 尝试文档和 demo 页面接合。

4. 明天需要把 P5，p6 的链接优化了，最主要是在 aecore-test 中进入原始数据录入
5. 今天完成本次迭代的任务梳理和录入。
6. 晚上需要听一节课。

## 2020-09-14

- 生活
- 身体健康
- 工作方面

1. gmp 的右侧边栏和积分商城接口优化<daily-status />
2. 土建 2.0 优化<daily-status />
   1. 加入 cdn<daily-status />
   2. 接口优化<daily-status />
3. 产品中心看板
4. 新产品容器接口沟通<daily-status />
5. 优秀案例

   1. 获取区域接口懒加载<daily-status />
   2. 地区下拉加入全部选项<daily-status />
   3. 点赞弹窗提示

6. 问题反馈 sdk

   1. sdk 封装<daily-status />
      包括数据校验，错误日志，兼容性，基础接口
   2. demo 页面<daily-status />
   3. 文档页面

- 个人能力

- 总结复盘

## 2020-09-16

- 生活
- 身体健康
- 工作方面

1. P5，P6 回滚<daily-status />

2. 问题反馈 sdk<daily-status />

   1. 文档页面
   2. jenkins 部署文档页和 aecoresdk 的 demo 页

- 个人能力

- 总结复盘

1. 之前链接数问题，一个页面请求多个接口，导致并发问题，解决方案是合并成一个接口，部署线上后并发问题是解决了，但是数据库蹦了，原来并发评级转移到数据库层面了！现在还在想办法优化。
2. 文档页面正式部署上线，aecoresdk 的 demo 页也部署上线，而且都是 jenkins 部署，效果非常好。因为自己有服务器玩过 jenkins，所以这一次遇到个 nodejs 版本问题，也自己偷偷解决了。

## 2020-09-17

- 生活
- 身体健康
- 工作方面

1. 问题反馈 sdk<daily-status />

   1. demo 页优化<daily-status />

- 个人能力

- 总结复盘

1. 解决一个图片裁剪问题，很神奇，一张图片上传华为云，如果第一次显示的时候使用了华为云 url 裁剪服务，缓存到 cdn 的图片就是裁剪的图片。

# 2020-09-18

- 生活
- 身体健康
- 工作方面

1. 新版提醒<daily-status />
2. 产品中心 gpmc 资源 cdn 化。
3. 积分商城备注
4. 埋点加入 version
5. 新版提醒有几个埋点要确认<daily-status />
6. 点赞积分添加的 tips 提示<daily-status />

- 个人能力

- 总结复盘
