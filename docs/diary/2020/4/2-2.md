# 2020-04-02

沟通的重要性，表达方式的重要性

## 故事背景

张冰 2 周前问了我一个 md 文件转成 html 文件的技术可行性，我正好在建个人博客，所以很快给出了可行的答复，甚至给他看了我做的博客，结果前 2 天刘卓找我做文档预览方面的工作，我不敢轻易答应，在和部门晓燕确认这不是我们的任务之后，果断拖后，没想到今天张冰建群说这个事情，我没有第一时间回复，因为刘卓就是简单的一句话，md 文档在中台上预览，至于细节，全部都不知道，所以我先找晓燕问怎么处理这个事情，得到答复是只要张冰安排这个工作，直接放到下个迭代的任务，到时候细化，我心里有的底数之后和张冰确认我具体要做的工作，此时的张冰认为就是简单把 md 文件生成 html 文件即可，我认为事情没那么简单，就和刘卓详细沟通了一次，故事从这里展开。

## 故事时间轴

1. 我先问刘卓需要我提供什么样的帮助，确认是把 md 文件转成 html 文件
2. 我提出 3 个问题：
   1. md 文件从哪来，生成的 html 放到哪去？<br>
      刘卓的答复是 md 文件由各个部门上传到制定目录下，我需要在制定目录下获得 md 文件进行 html 转换，转换的 html 文件在放到指定的地方，用于中台预览。
   2. md 文件直接的关系是怎么样的，怎么把 md 文件组合成一个目录结构？<br>
      刘卓的答复是有上方导航栏是各个部门，右侧菜单栏是产品，sdk 等各个大分类，分类下面才是具体 md。
   3. md 文件是否涉及检索，目录结构规范化等要求？<br>
      刘卓的答复是检索需要考虑，要涉及关键字，目录结构需要规范化，要设计出相应的模板供各部门使用。
3. 需求被细分之后，我发现需要建立一个项目，md 的来源和去处是 jenkins 自动化部署去配置，当然本身项目也需要相应的代码配置，目录结构按目前需求也能代码实现，当然这 2 块可以放后去做。
   <span style="color: red;">现在问题的关键是设计出模板，这个模板可以生成正确的目录结构以及达到检索需求。</span>
4. 此时难点集中在：
   1. 模板需要展示的内容上，作为 api 模板，需要展示各部门的接口情况，那么对各个接口的详细信息都应该涉及到，比如`url`,`接口说明`，`请求体内容`，`请求体格式（文件流，url参数，表单参数）`，`消息头`，`响应体`，`响应模型`，`基础调用demo`,`错误码`等等
   2. 展示的内容以什么样的结构和样式去展示，需要生成什么样的目录结构，需要检索的关键字在哪里输入
   3. 根据模板编写 md 文档的时候，如何实时的预览内容
5. 此时刘卓终于明白简单的一句把 md 文件生成 html 文件在中台展示是个很复杂的技术活，于是她把重点放在模板的设计上，因为这个必须马上给各部门使用。这个时候参考了：[可信平台微服务 APIs](https://zh.wikipedia.org/wiki/%E7%89%9B%E9%A1%BF%E8%BF%90%E5%8A%A8%E5%AE%9A%E5%BE%8B)以及大牛哥的 API 文档，这里我不得不插句，之前就听过大牛哥的技术分享，就是 api 文档的自动化生成，涉及的技术细节非常多，他的团队花了几年时间去雕琢，这次不用他现成的，反而要自己去做，真的不明白为什么，而且居然还认为那么简单。刘卓接下来的几天会参考这些文档设计出合适的模板，在和我配合看生成的 html 的效果。
6. 这时候新的问题出现，这个模板文档不能有漏洞，因为在设计完给部门使用之后，部门如果完成的各自的 api 文档，我们在后期优化文档系统的时候发现模板有问题要修正，那各部门肯定不愿意重新写一份，但是之前写的又不达标，那时候处理起来会非常麻烦，所以这个文档要考虑的点就非常多，<span style="color: red;">除了内容要详尽之外，样式方面和检索方面也要考虑，而且要考虑平台兼容性，比如代码预览，有些平台无法解析，又比如 vuepress 适用的插件，可能在 hexo，gitbook 上无法适配等等。所以在选型 vuepress 去做 md 的文件转换的时候，模板就是适配 vuepress 的，那么在移植到别的平台，兼容性问题就会爆发。所以模板是写成原始通用的，还是样式丰富但是有兼容性的，这个需要考究。</span>
7. 最后定在下周四给出模板成品，不过因为模板设计是刘卓处理，压力不在我，所以还好说。

## 故事总结

1. 这次的沟通效果很好，首先理清了需求，让刘卓明白这不是个简单的活，需要她做的东西非常的多，并且定下了时间点，让我对任务进度有大概了解，可以正确分配精力以及重点调研具体技术细节。
2. 因为我之前已经有这方面的经验，包括 vuepress 的学习，博客的编写，api 文档的编写，才明白里面的门门道道，才能在一开始就阐明问题所在，如果是一个不了解这块的技术人员和产品去沟通，不但没有效果，反而会让事情恶化，比如模板不合格，以后部门写了一次不会去写第二次。所以平时要多积累，关键时候肯定用得上。
3. 做任何事情思路一定要清晰，要在脑海把整个事情流程走完，这样才能指出可能遇到的问题，好在第一时间提出，否则做的时候在发现，一切都晚了，还被别人质疑能力不行，也耽误计划。
4. 给张冰答复的时候很冷静，缓了一会儿，自己理清了来龙去脉，并且向同事请教，目的有二，第一让更多人了解这个事情，并且知道这是个大的工作，这样我做的时候大家都有数，不会出现我花了大精力，别人都不知道这个事情，以为我很清闲的错觉；第二是别人知道我不知道的情况，可以给我更好的建议和帮助，比如工作放入迭代，进度延期等。
5. 这个是最重要的，一定要进行责任划分，让所有人明确自己的工作职责，比如刘卓知道自己提供模板的难度那么大，她就会紧张的去做，否则扯不清楚，还怪到我头上说我技术有问题实现不了，比如了解到张冰负责 md 文件的来源和 html 文件的去处，已经 jenkins 自动化部署由他负责，这样工作的时候就知道哪块找他沟通，如何去沟通。
